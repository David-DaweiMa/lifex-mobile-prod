# ðŸ—ï¸ LifeX æ•°æ®åº“æž¶æž„å…¨é¢å®¡æŸ¥ä¸Žé‡æž„

> Guiding Principleï¼ˆLifex Manifestoï¼‰
> æˆ‘ä»¬çš„æ ¸å¿ƒä»·å€¼æ˜¯åˆ©ç”¨ AI çš„èƒ½åŠ›æ·±å…¥ç†è§£æ¯ä¸ª business å’Œæ¯ä¸ªç”¨æˆ·ï¼Œå¹¶æ®æ­¤åšæœ€åˆé€‚çš„åŒ¹é…ã€‚æ‰€æœ‰å¯ä»¥åˆæ³•èŽ·å–çš„æ•°æ®éƒ½ç”¨äºŽå¸®åŠ© AI æŒç»­åŠ æ·±ç†è§£ï¼›éšç€æ—¶é—´ä¸Žæ•°æ®å¢žé•¿ï¼Œè¿™ä»½ç†è§£ä¼šä¸æ–­è¿›åŒ–ã€‚å”¯æœ‰åŸºäºŽè¿™ç§ç†è§£ï¼Œæˆ‘ä»¬æ‰èƒ½æä¾›è®©å®¢æˆ·æ»¡æ„çš„ä¸€åˆ‡æœåŠ¡ï¼ˆchatã€æŽ¨èã€AI åŠ©æ‰‹ï¼‰ä»¥åŠåŽç»­çš„ä¼˜æƒ åˆ¸ã€è®¢åº§ã€è®¢é¤ã€æœåŠ¡é¢„å®šã€ç¥¨åŠ¡è´­ä¹°ç­‰ä¸‹æ¸¸äº¤æ˜“ã€‚

**æ›´æ–°æ—¶é—´ï¼š** 2024-10-17

---

## ðŸ“‹ ç›®å½•
1. [å½“å‰çŠ¶æ€åˆ†æž](#å½“å‰çŠ¶æ€åˆ†æž)
2. [åº”ç”¨åŠŸèƒ½éœ€æ±‚](#åº”ç”¨åŠŸèƒ½éœ€æ±‚)
3. [ç†æƒ³æ•°æ®åº“æž¶æž„](#ç†æƒ³æ•°æ®åº“æž¶æž„)
4. [è¡¨ç»“æž„è¯¦ç»†è®¾è®¡](#è¡¨ç»“æž„è¯¦ç»†è®¾è®¡)
5. [è¡¨å…³ç³»å›¾](#è¡¨å…³ç³»å›¾)
6. [è¿ç§»è®¡åˆ’](#è¿ç§»è®¡åˆ’)
7. [å®žæ–½æ­¥éª¤](#å®žæ–½æ­¥éª¤)

---

## ðŸ“Š å½“å‰çŠ¶æ€åˆ†æž

### **å½“å‰å·²çŸ¥çš„è¡¨ï¼š**

```
âœ… å·²å­˜åœ¨ï¼ˆä»Žä»£ç ä¸­çœ‹åˆ°ï¼‰ï¼š
â”œâ”€ user_profiles          // ç”¨æˆ·èµ„æ–™
â”œâ”€ user_quotas            // ç”¨æˆ·é…é¢
â”œâ”€ businesses             // å•†å®¶ä¿¡æ¯
â”œâ”€ events                 // æ´»åŠ¨ä¿¡æ¯
â”œâ”€ specials               // ä¼˜æƒ ä¿¡æ¯
â”œâ”€ trending_posts         // çƒ­é—¨å¸–å­
â”œâ”€ chat_messages          // èŠå¤©æ¶ˆæ¯
â”œâ”€ advertisements         // å¹¿å‘Š
â”œâ”€ assistant_usage        // AI åŠ©æ‰‹ä½¿ç”¨è®°å½•
â””â”€ anonymous_usage        // åŒ¿åç”¨æˆ·ä½¿ç”¨è®°å½•

âš ï¸ å¯èƒ½éœ€è¦ä½†ä¸ç¡®å®šæ˜¯å¦å­˜åœ¨ï¼š
â”œâ”€ favorites              // æ”¶è—
â”œâ”€ reviews                // è¯„è®º
â”œâ”€ bookings               // é¢„è®¢
â”œâ”€ business_categories    // å•†å®¶åˆ†ç±»
â”œâ”€ user_preferences       // ç”¨æˆ·åå¥½
â””â”€ notifications          // é€šçŸ¥
```

---

## ðŸŽ¯ åº”ç”¨åŠŸèƒ½éœ€æ±‚åˆ†æž

### **æ ¸å¿ƒåŠŸèƒ½æ¨¡å—ï¼š**

```
1. ç”¨æˆ·ç³»ç»Ÿ ðŸ‘¤
   â”œâ”€ æ³¨å†Œ/ç™»å½•
   â”œâ”€ ä¸ªäººèµ„æ–™
   â”œâ”€ è®¢é˜…ç®¡ç†ï¼ˆFree/Essential/Premiumï¼‰
   â”œâ”€ ä½¿ç”¨é…é¢
   â””â”€ åå¥½è®¾ç½®

2. å•†å®¶ç³»ç»Ÿ ðŸª
   â”œâ”€ å•†å®¶ä¿¡æ¯å±•ç¤º
   â”œâ”€ å•†å®¶åˆ†ç±»/ç­›é€‰
   â”œâ”€ å•†å®¶æœç´¢
   â”œâ”€ å•†å®¶è®¤è¯
   â”œâ”€ å•†å®¶åŽå°ç®¡ç†ï¼ˆæœªæ¥ï¼‰
   â””â”€ Google Places é›†æˆ

3. æ´»åŠ¨ç³»ç»Ÿ ðŸŽ‰
   â”œâ”€ æ´»åŠ¨åˆ—è¡¨
   â”œâ”€ æ´»åŠ¨è¯¦æƒ…
   â”œâ”€ æ´»åŠ¨åˆ†ç±»
   â”œâ”€ æ´»åŠ¨æœç´¢
   â””â”€ æ´»åŠ¨å…³è”å•†å®¶

4. ä¼˜æƒ ç³»ç»Ÿ ðŸ·ï¸
   â”œâ”€ ä¼˜æƒ åˆ—è¡¨
   â”œâ”€ ä¼˜æƒ è¯¦æƒ…
   â”œâ”€ ä¼˜æƒ åˆ†ç±»
   â”œâ”€ ä¼˜æƒ é¢†å–
   â””â”€ ä¼˜æƒ å…³è”å•†å®¶

5. æ”¶è—ç³»ç»Ÿ â¤ï¸
   â”œâ”€ æ”¶è—å•†å®¶
   â”œâ”€ æ”¶è—æ´»åŠ¨
   â”œâ”€ æ”¶è—ä¼˜æƒ 
   â””â”€ æ”¶è—ç®¡ç†

6. AI Chat ç³»ç»Ÿ ðŸ¤–
   â”œâ”€ å¯¹è¯åŽ†å²
   â”œâ”€ æŽ¨èè®°å½•
   â”œâ”€ ä¼šè¯ç®¡ç†
   â””â”€ RAG æ•°æ®æ£€ç´¢

7. è¯„è®ºç³»ç»Ÿ â­
   â”œâ”€ ç”¨æˆ·è¯„è®º
   â”œâ”€ è¯„åˆ†
   â”œâ”€ è¯„è®ºå›žå¤
   â””â”€ è¯„è®ºç‚¹èµž

8. é€šçŸ¥ç³»ç»Ÿ ðŸ””
   â”œâ”€ ç³»ç»Ÿé€šçŸ¥
   â”œâ”€ æ´»åŠ¨æé†’
   â”œâ”€ ä¼˜æƒ æŽ¨é€
   â””â”€ è®¢é˜…é€šçŸ¥
```

---

## ðŸ›ï¸ ç†æƒ³æ•°æ®åº“æž¶æž„

### **æ ¸å¿ƒè®¾è®¡åŽŸåˆ™ï¼š**

```
âœ… æ¸…æ™°çš„è¡¨ç»“æž„
âœ… æ˜Žç¡®çš„è¡¨å…³ç³»
âœ… é¿å…æ•°æ®å†—ä½™
âœ… æ€§èƒ½ä¼˜åŒ–
âœ… æ˜“äºŽæ‰©å±•
âœ… ç¬¦åˆè§„èŒƒ
```

### **æŽ¨èçš„è¡¨ç»“æž„ï¼ˆå®Œæ•´ç‰ˆï¼‰ï¼š**

```
ðŸ”µ æ ¸å¿ƒè¡¨ï¼ˆå¿…é¡»ï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ç”¨æˆ·ç›¸å…³ï¼ˆ3 è¡¨ï¼‰
   â”œâ”€ user_profiles           // ç”¨æˆ·èµ„æ–™
   â”œâ”€ user_subscriptions      // è®¢é˜…ç®¡ç†ï¼ˆæ–°ï¼‰
   â””â”€ user_preferences        // ç”¨æˆ·åå¥½ï¼ˆæ–°ï¼‰

2. å•†å®¶ç›¸å…³ï¼ˆ3 è¡¨ï¼‰
   â”œâ”€ businesses              // å•†å®¶ä¸»è¡¨
   â”œâ”€ business_categories     // å•†å®¶åˆ†ç±»ï¼ˆæ–°ï¼‰
   â””â”€ business_photos         // å•†å®¶ç…§ç‰‡ï¼ˆæ–°ï¼Œå¯é€‰ï¼‰

3. æ´»åŠ¨ç›¸å…³ï¼ˆ1 è¡¨ï¼‰
   â””â”€ events                  // æ´»åŠ¨è¡¨

4. ä¼˜æƒ ç›¸å…³ï¼ˆ1 è¡¨ï¼‰
   â””â”€ specials                // ä¼˜æƒ è¡¨

5. æ”¶è—ç›¸å…³ï¼ˆ1 è¡¨ï¼‰
   â””â”€ favorites               // ç»Ÿä¸€æ”¶è—è¡¨ï¼ˆæ–°ï¼‰

6. AI Chat ç›¸å…³ï¼ˆ2 è¡¨ï¼‰
   â”œâ”€ chat_sessions           // ä¼šè¯ç®¡ç†ï¼ˆæ–°ï¼‰
   â””â”€ chat_messages           // æ¶ˆæ¯è®°å½•

7. è¯„è®ºç›¸å…³ï¼ˆ2 è¡¨ï¼‰
   â”œâ”€ reviews                 // è¯„è®ºä¸»è¡¨ï¼ˆæ–°ï¼‰
   â””â”€ review_replies          // è¯„è®ºå›žå¤ï¼ˆæ–°ï¼Œå¯é€‰ï¼‰

8. é€šçŸ¥ç›¸å…³ï¼ˆ1 è¡¨ï¼‰
   â””â”€ notifications           // é€šçŸ¥è¡¨ï¼ˆæ–°ï¼‰

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
æ€»è®¡ï¼š15-17 ä¸ªæ ¸å¿ƒè¡¨

ðŸŸ¡ è¾…åŠ©è¡¨ï¼ˆå¯é€‰/åŽæœŸï¼‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

9. é¢„è®¢ç›¸å…³ï¼ˆå¯é€‰ï¼‰
   â””â”€ bookings                // é¢„è®¢è¡¨

10. çƒ­é—¨å†…å®¹ï¼ˆä¿ç•™ï¼‰
    â””â”€ trending_posts         // çƒ­é—¨å¸–å­

11. å¹¿å‘Šç³»ç»Ÿï¼ˆä¿ç•™ï¼‰
    â””â”€ advertisements         // å¹¿å‘Š

12. ç»Ÿè®¡åˆ†æžï¼ˆåŽæœŸï¼‰
    â”œâ”€ user_activity_logs     // ç”¨æˆ·è¡Œä¸ºæ—¥å¿—
    â””â”€ business_analytics     // å•†å®¶ç»Ÿè®¡
```

---

## ðŸ“ è¡¨ç»“æž„è¯¦ç»†è®¾è®¡

### **1. ðŸ‘¤ ç”¨æˆ·ç³»ç»Ÿ**

#### **1.1 user_profilesï¼ˆç”¨æˆ·èµ„æ–™ï¼‰**

```sql
CREATE TABLE user_profiles (
  -- åŸºæœ¬ä¿¡æ¯
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  email TEXT UNIQUE NOT NULL,
  username TEXT UNIQUE,
  full_name TEXT,
  avatar_url TEXT,
  phone TEXT,
  
  -- ä¸ªäººä¿¡æ¯
  date_of_birth DATE,
  gender TEXT CHECK (gender IN ('male', 'female', 'other', 'prefer_not_to_say')),
  bio TEXT,
  
  -- åœ°å€ä¿¡æ¯
  city TEXT,
  country TEXT DEFAULT 'New Zealand',
  location GEOGRAPHY(POINT, 4326),
  
  -- çŠ¶æ€
  email_verified BOOLEAN DEFAULT FALSE,
  is_active BOOLEAN DEFAULT TRUE,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  last_login_at TIMESTAMPTZ
);

-- ç´¢å¼•
CREATE INDEX idx_user_profiles_email ON user_profiles(email);
CREATE INDEX idx_user_profiles_username ON user_profiles(username);
CREATE INDEX idx_user_profiles_city ON user_profiles(city);
CREATE INDEX idx_user_profiles_location ON user_profiles USING GIST(location);
```

#### **1.2 user_subscriptionsï¼ˆè®¢é˜…ç®¡ç†ï¼‰ðŸ†•**

```sql
CREATE TABLE user_subscriptions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID NOT NULL REFERENCES user_profiles(id) ON DELETE CASCADE,
  
  -- è®¢é˜…ä¿¡æ¯
  plan_type TEXT NOT NULL CHECK (plan_type IN ('free', 'essential', 'premium')),
  status TEXT NOT NULL CHECK (status IN ('active', 'expired', 'cancelled', 'trial')),
  
  -- æ—¶é—´ç®¡ç†
  started_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
  expires_at TIMESTAMPTZ,
  cancelled_at TIMESTAMPTZ,
  
  -- æ”¯ä»˜ä¿¡æ¯ï¼ˆå¯é€‰ï¼‰
  payment_method TEXT,
  payment_id TEXT,
  amount DECIMAL(10,2),
  currency TEXT DEFAULT 'NZD',
  
  -- é…é¢ï¼ˆä»Ž plan_type è‡ªåŠ¨è®¾ç½®ï¼‰
  chat_quota INTEGER DEFAULT 10,
  chat_used INTEGER DEFAULT 0,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- çº¦æŸ
  UNIQUE(user_id, started_at)
);

-- ç´¢å¼•
CREATE INDEX idx_user_subscriptions_user_id ON user_subscriptions(user_id);
CREATE INDEX idx_user_subscriptions_status ON user_subscriptions(status);
CREATE INDEX idx_user_subscriptions_expires_at ON user_subscriptions(expires_at);
```

#### **1.3 user_preferencesï¼ˆç”¨æˆ·åå¥½ï¼‰ðŸ†•**

```sql
CREATE TABLE user_preferences (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID UNIQUE NOT NULL REFERENCES user_profiles(id) ON DELETE CASCADE,
  
  -- åå¥½è®¾ç½®
  preferred_categories TEXT[],
  preferred_cuisines TEXT[],
  dietary_restrictions TEXT[],
  price_preference TEXT CHECK (price_preference IN ('budget', 'moderate', 'upscale', 'luxury')),
  
  -- æœç´¢åå¥½
  default_search_radius INTEGER DEFAULT 5000, -- ç±³
  preferred_cities TEXT[],
  
  -- é€šçŸ¥åå¥½
  notifications_enabled BOOLEAN DEFAULT TRUE,
  email_notifications BOOLEAN DEFAULT TRUE,
  push_notifications BOOLEAN DEFAULT TRUE,
  
  -- AI åå¥½
  ai_language TEXT DEFAULT 'en',
  ai_personality TEXT DEFAULT 'friendly',
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_user_preferences_user_id ON user_preferences(user_id);
```

---

### **2. ðŸª å•†å®¶ç³»ç»Ÿ**

#### **2.1 business_categoriesï¼ˆå•†å®¶åˆ†ç±»ï¼‰ðŸ†•**

```sql
CREATE TABLE business_categories (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT UNIQUE NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  description TEXT,
  icon TEXT,
  parent_id UUID REFERENCES business_categories(id) ON DELETE SET NULL,
  
  -- æ˜¾ç¤ºè®¾ç½®
  display_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT TRUE,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_business_categories_slug ON business_categories(slug);
CREATE INDEX idx_business_categories_parent_id ON business_categories(parent_id);
CREATE INDEX idx_business_categories_display_order ON business_categories(display_order);

-- ç¤ºä¾‹æ•°æ®
INSERT INTO business_categories (name, slug, description, display_order) VALUES
  ('Food & Dining', 'food-dining', 'Restaurants, cafes, and food services', 1),
  ('Beauty & Wellness', 'beauty-wellness', 'Salons, spas, and wellness centers', 2),
  ('Entertainment', 'entertainment', 'Fun activities and entertainment venues', 3),
  ('Health & Medical', 'health-medical', 'Healthcare and medical services', 4),
  ('Shopping & Retail', 'shopping-retail', 'Stores and shopping centers', 5);
```

#### **2.2 businessesï¼ˆå•†å®¶ä¸»è¡¨ - ä¼˜åŒ–ç‰ˆï¼‰**

```sql
CREATE TABLE businesses (
  -- åŸºæœ¬ä¿¡æ¯
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  name TEXT NOT NULL,
  slug TEXT UNIQUE,
  description TEXT,
  
  -- åˆ†ç±»
  category_id UUID REFERENCES business_categories(id) ON DELETE SET NULL,
  subcategories TEXT[], -- ä¿ç•™å‘åŽå…¼å®¹
  tags TEXT[],
  
  -- åœ°å€å’Œä½ç½®
  address JSONB,
  city TEXT,
  country TEXT DEFAULT 'New Zealand',
  postcode TEXT,
  location GEOGRAPHY(POINT, 4326),
  
  -- è”ç³»æ–¹å¼
  contact_info JSONB, -- {phone, email, website, social}
  
  -- è¥ä¸šæ—¶é—´
  business_hours JSONB,
  
  -- å•†å®¶æ‰€æœ‰è€…
  owner_id UUID REFERENCES user_profiles(id) ON DELETE SET NULL,
  
  -- åª’ä½“
  logo_url TEXT,
  cover_image_url TEXT,
  owner_uploaded_photos TEXT[],
  
  -- Google Places é›†æˆ
  google_place_id TEXT UNIQUE,
  google_photo_reference TEXT,
  
  -- ç¼“å­˜çš„ Google æ•°æ®ï¼ˆ30 å¤©ï¼‰
  cached_name TEXT,
  cached_address TEXT,
  cached_phone TEXT,
  cached_google_rating DECIMAL(2,1),
  cached_google_reviews INTEGER,
  cached_at TIMESTAMPTZ,
  cache_expires_at TIMESTAMPTZ,
  
  -- LifeX è‡ªæœ‰è¯„åˆ†
  lifex_rating DECIMAL(2,1),
  lifex_review_count INTEGER DEFAULT 0,
  
  -- æ˜¾ç¤ºè¯„åˆ†ï¼ˆè‡ªåŠ¨è®¡ç®—ï¼‰
  display_rating DECIMAL(2,1) GENERATED ALWAYS AS (
    COALESCE(cached_google_rating, lifex_rating, 0)
  ) STORED,
  display_review_count INTEGER GENERATED ALWAYS AS (
    COALESCE(cached_google_reviews, lifex_review_count, 0)
  ) STORED,
  
  -- ç»Ÿè®¡æ•°æ®
  view_count INTEGER DEFAULT 0,
  favorite_count INTEGER DEFAULT 0,
  share_count INTEGER DEFAULT 0,
  booking_count INTEGER DEFAULT 0,
  
  -- æŽ’åºå’Œç­›é€‰
  priority_score DECIMAL(5,2) DEFAULT 0,
  
  -- çŠ¶æ€
  is_verified BOOLEAN DEFAULT FALSE,
  is_featured BOOLEAN DEFAULT FALSE,
  is_active BOOLEAN DEFAULT TRUE,
  
  -- æ•°æ®æ¥æº
  data_source TEXT DEFAULT 'manual' CHECK (data_source IN ('manual', 'google', 'owner', 'hybrid')),
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_businesses_category_id ON businesses(category_id);
CREATE INDEX idx_businesses_city ON businesses(city);
CREATE INDEX idx_businesses_location ON businesses USING GIST(location);
CREATE INDEX idx_businesses_slug ON businesses(slug);
CREATE INDEX idx_businesses_google_place_id ON businesses(google_place_id);
CREATE INDEX idx_businesses_owner_id ON businesses(owner_id);
CREATE INDEX idx_businesses_priority_score ON businesses(priority_score DESC);
CREATE INDEX idx_businesses_display_rating ON businesses(display_rating DESC);
CREATE INDEX idx_businesses_is_active_city_category ON businesses(is_active, city, category_id) WHERE is_active = TRUE;
```

---

### **3. ðŸŽ‰ æ´»åŠ¨ç³»ç»Ÿ**

#### **3.1 eventsï¼ˆæ´»åŠ¨è¡¨ - ä¼˜åŒ–ç‰ˆï¼‰**

```sql
CREATE TABLE events (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- åŸºæœ¬ä¿¡æ¯
  title TEXT NOT NULL,
  slug TEXT UNIQUE,
  description TEXT,
  
  -- æ—¶é—´å’Œåœ°ç‚¹
  date DATE NOT NULL,
  start_time TIME,
  end_time TIME,
  timezone TEXT DEFAULT 'Pacific/Auckland',
  location TEXT NOT NULL,
  venue_name TEXT,
  city TEXT,
  location_coords GEOGRAPHY(POINT, 4326),
  
  -- åˆ†ç±»å’Œæ ‡ç­¾
  category TEXT NOT NULL,
  tags TEXT[],
  
  -- ç¥¨ä»·å’Œäººæ•°
  price_type TEXT CHECK (price_type IN ('free', 'paid', 'donation')),
  price_min DECIMAL(10,2),
  price_max DECIMAL(10,2),
  currency TEXT DEFAULT 'NZD',
  capacity INTEGER,
  attendees_count INTEGER DEFAULT 0,
  
  -- åª’ä½“
  image_url TEXT,
  images TEXT[],
  
  -- å…³è”
  organizer_id UUID REFERENCES user_profiles(id) ON DELETE SET NULL,
  business_id UUID REFERENCES businesses(id) ON DELETE SET NULL,
  
  -- ç»Ÿè®¡
  view_count INTEGER DEFAULT 0,
  like_count INTEGER DEFAULT 0,
  share_count INTEGER DEFAULT 0,
  
  -- çŠ¶æ€
  is_hot BOOLEAN DEFAULT FALSE,
  is_featured BOOLEAN DEFAULT FALSE,
  is_active BOOLEAN DEFAULT TRUE,
  status TEXT DEFAULT 'upcoming' CHECK (status IN ('upcoming', 'ongoing', 'completed', 'cancelled')),
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_events_date ON events(date);
CREATE INDEX idx_events_category ON events(category);
CREATE INDEX idx_events_city ON events(city);
CREATE INDEX idx_events_business_id ON events(business_id);
CREATE INDEX idx_events_organizer_id ON events(organizer_id);
CREATE INDEX idx_events_status ON events(status);
CREATE INDEX idx_events_location_coords ON events USING GIST(location_coords);
CREATE INDEX idx_events_is_active_date ON events(is_active, date) WHERE is_active = TRUE;
```

---

### **4. ðŸ·ï¸ ä¼˜æƒ ç³»ç»Ÿ**

#### **4.1 specialsï¼ˆä¼˜æƒ è¡¨ - ä¼˜åŒ–ç‰ˆï¼‰**

```sql
CREATE TABLE specials (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- å…³è”å•†å®¶ï¼ˆå¿…é¡»ï¼‰
  business_id UUID NOT NULL REFERENCES businesses(id) ON DELETE CASCADE,
  
  -- åŸºæœ¬ä¿¡æ¯
  title TEXT NOT NULL,
  slug TEXT UNIQUE,
  description TEXT,
  
  -- åˆ†ç±»
  category TEXT NOT NULL,
  tags TEXT[],
  
  -- æŠ˜æ‰£ä¿¡æ¯
  discount_type TEXT CHECK (discount_type IN ('percentage', 'fixed_amount', 'bogo', 'other')),
  discount_value TEXT NOT NULL,
  original_price DECIMAL(10,2),
  discounted_price DECIMAL(10,2),
  currency TEXT DEFAULT 'NZD',
  
  -- æœ‰æ•ˆæœŸ
  starts_at TIMESTAMPTZ,
  expires_at TIMESTAMPTZ NOT NULL,
  
  -- é™åˆ¶
  usage_limit INTEGER,
  usage_count INTEGER DEFAULT 0,
  terms_and_conditions TEXT,
  
  -- åª’ä½“
  image_url TEXT,
  
  -- ç»Ÿè®¡
  view_count INTEGER DEFAULT 0,
  claim_count INTEGER DEFAULT 0,
  share_count INTEGER DEFAULT 0,
  
  -- çŠ¶æ€
  is_featured BOOLEAN DEFAULT FALSE,
  is_active BOOLEAN DEFAULT TRUE,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_specials_business_id ON specials(business_id);
CREATE INDEX idx_specials_category ON specials(category);
CREATE INDEX idx_specials_expires_at ON specials(expires_at);
CREATE INDEX idx_specials_is_active_expires ON specials(is_active, expires_at) WHERE is_active = TRUE;
```

---

### **5. â¤ï¸ æ”¶è—ç³»ç»Ÿ**

#### **5.1 favoritesï¼ˆç»Ÿä¸€æ”¶è—è¡¨ï¼‰ðŸ†•**

```sql
CREATE TABLE favorites (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- ç”¨æˆ·
  user_id UUID NOT NULL REFERENCES user_profiles(id) ON DELETE CASCADE,
  
  -- æ”¶è—å¯¹è±¡ï¼ˆå¤šæ€å…³è”ï¼‰
  favoritable_type TEXT NOT NULL CHECK (favoritable_type IN ('business', 'event', 'special')),
  favoritable_id UUID NOT NULL,
  
  -- åˆ†ç»„ï¼ˆå¯é€‰ï¼‰
  folder_name TEXT,
  notes TEXT,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- å”¯ä¸€çº¦æŸ
  UNIQUE(user_id, favoritable_type, favoritable_id)
);

-- ç´¢å¼•
CREATE INDEX idx_favorites_user_id ON favorites(user_id);
CREATE INDEX idx_favorites_favoritable ON favorites(favoritable_type, favoritable_id);
CREATE INDEX idx_favorites_created_at ON favorites(created_at DESC);
```

---

### **6. ðŸ¤– AI Chat ç³»ç»Ÿ**

#### **6.1 chat_sessionsï¼ˆä¼šè¯ç®¡ç†ï¼‰ðŸ†•**

```sql
CREATE TABLE chat_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- ç”¨æˆ·
  user_id UUID REFERENCES user_profiles(id) ON DELETE CASCADE,
  
  -- ä¼šè¯ä¿¡æ¯
  title TEXT,
  summary TEXT,
  
  -- ç»Ÿè®¡
  message_count INTEGER DEFAULT 0,
  
  -- çŠ¶æ€
  is_active BOOLEAN DEFAULT TRUE,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  last_message_at TIMESTAMPTZ
);

-- ç´¢å¼•
CREATE INDEX idx_chat_sessions_user_id ON chat_sessions(user_id);
CREATE INDEX idx_chat_sessions_last_message_at ON chat_sessions(last_message_at DESC);
```

#### **6.2 chat_messagesï¼ˆæ¶ˆæ¯è®°å½• - ä¼˜åŒ–ç‰ˆï¼‰**

```sql
CREATE TABLE chat_messages (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- å…³è”
  session_id UUID NOT NULL REFERENCES chat_sessions(id) ON DELETE CASCADE,
  user_id UUID REFERENCES user_profiles(id) ON DELETE SET NULL,
  
  -- æ¶ˆæ¯å†…å®¹
  role TEXT NOT NULL CHECK (role IN ('user', 'assistant', 'system')),
  content TEXT NOT NULL,
  
  -- AI å…ƒæ•°æ®
  model TEXT,
  tokens_used INTEGER,
  metadata JSONB,
  
  -- æŽ¨èï¼ˆå¦‚æžœæœ‰ï¼‰
  recommendations JSONB, -- æŽ¨èçš„å•†å®¶/æ´»åŠ¨IDåˆ—è¡¨
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_chat_messages_session_id ON chat_messages(session_id);
CREATE INDEX idx_chat_messages_user_id ON chat_messages(user_id);
CREATE INDEX idx_chat_messages_created_at ON chat_messages(created_at DESC);
```

---

### **7. â­ è¯„è®ºç³»ç»Ÿ**

#### **7.1 reviewsï¼ˆè¯„è®ºä¸»è¡¨ï¼‰ðŸ†•**

```sql
CREATE TABLE reviews (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- ç”¨æˆ·
  user_id UUID NOT NULL REFERENCES user_profiles(id) ON DELETE CASCADE,
  
  -- è¯„è®ºå¯¹è±¡ï¼ˆå¤šæ€ï¼‰
  reviewable_type TEXT NOT NULL CHECK (reviewable_type IN ('business', 'event')),
  reviewable_id UUID NOT NULL,
  
  -- è¯„åˆ†å’Œå†…å®¹
  rating INTEGER NOT NULL CHECK (rating >= 1 AND rating <= 5),
  title TEXT,
  content TEXT,
  
  -- è¯¦ç»†è¯„åˆ†ï¼ˆå¯é€‰ï¼‰
  ratings JSONB, -- {food: 5, service: 4, ambiance: 5, value: 4}
  
  -- åª’ä½“
  photos TEXT[],
  
  -- äº’åŠ¨
  helpful_count INTEGER DEFAULT 0,
  unhelpful_count INTEGER DEFAULT 0,
  
  -- çŠ¶æ€
  is_verified_purchase BOOLEAN DEFAULT FALSE,
  is_featured BOOLEAN DEFAULT FALSE,
  is_active BOOLEAN DEFAULT TRUE,
  moderation_status TEXT DEFAULT 'pending' CHECK (moderation_status IN ('pending', 'approved', 'rejected')),
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW(),
  
  -- å”¯ä¸€çº¦æŸï¼ˆä¸€ä¸ªç”¨æˆ·å¯¹åŒä¸€å¯¹è±¡åªèƒ½è¯„è®ºä¸€æ¬¡ï¼‰
  UNIQUE(user_id, reviewable_type, reviewable_id)
);

-- ç´¢å¼•
CREATE INDEX idx_reviews_user_id ON reviews(user_id);
CREATE INDEX idx_reviews_reviewable ON reviews(reviewable_type, reviewable_id);
CREATE INDEX idx_reviews_rating ON reviews(rating);
CREATE INDEX idx_reviews_created_at ON reviews(created_at DESC);
CREATE INDEX idx_reviews_is_active_approved ON reviews(is_active, moderation_status) WHERE is_active = TRUE AND moderation_status = 'approved';
```

---

### **8. ðŸ”” é€šçŸ¥ç³»ç»Ÿ**

#### **8.1 notificationsï¼ˆé€šçŸ¥è¡¨ï¼‰ðŸ†•**

```sql
CREATE TABLE notifications (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  
  -- ç”¨æˆ·
  user_id UUID NOT NULL REFERENCES user_profiles(id) ON DELETE CASCADE,
  
  -- é€šçŸ¥å†…å®¹
  type TEXT NOT NULL CHECK (type IN ('system', 'event', 'special', 'review', 'booking', 'subscription')),
  title TEXT NOT NULL,
  message TEXT NOT NULL,
  
  -- å…³è”å¯¹è±¡ï¼ˆå¯é€‰ï¼‰
  related_type TEXT,
  related_id UUID,
  
  -- æ“ä½œé“¾æŽ¥
  action_url TEXT,
  
  -- çŠ¶æ€
  is_read BOOLEAN DEFAULT FALSE,
  read_at TIMESTAMPTZ,
  
  -- æ—¶é—´æˆ³
  created_at TIMESTAMPTZ DEFAULT NOW(),
  expires_at TIMESTAMPTZ
);

-- ç´¢å¼•
CREATE INDEX idx_notifications_user_id ON notifications(user_id);
CREATE INDEX idx_notifications_is_read ON notifications(is_read);
CREATE INDEX idx_notifications_created_at ON notifications(created_at DESC);
CREATE INDEX idx_notifications_user_unread ON notifications(user_id, is_read) WHERE is_read = FALSE;
```

---

## ðŸ”— è¡¨å…³ç³»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  user_profiles   â”‚â—€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
         â”‚                 â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         â”‚            â”‚             â”‚
    â–¼         â–¼            â”‚             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚subscri- â”‚ â”‚preferences â”‚â”‚      â”‚  favorites   â”‚
â”‚ptions   â”‚ â”‚            â”‚â”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚             â”‚
â–¼                          â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  businesses  â”‚â”€â”€â”€â”€â–¶â”‚  events  â”‚  â”‚specials â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
       â”‚                  â”‚             â”‚
       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  reviews     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚chat_sessions â”‚â—€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
       â”‚            â”‚
       â–¼            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚chat_messages â”‚â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚notifications â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚business_       â”‚
â”‚categories      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    businesses
```

---

## ðŸ“‹ è¿ç§»è®¡åˆ’

### **é˜¶æ®µ 0: å‡†å¤‡å·¥ä½œï¼ˆå¿…é¡»ï¼‰**

```sql
-- 1. å®Œæ•´å¤‡ä»½æ‰€æœ‰è¡¨
CREATE SCHEMA backup_20241017;

-- å¤‡ä»½æ¯ä¸ªè¡¨
CREATE TABLE backup_20241017.user_profiles AS SELECT * FROM user_profiles;
CREATE TABLE backup_20241017.businesses AS SELECT * FROM businesses;
CREATE TABLE backup_20241017.events AS SELECT * FROM events;
CREATE TABLE backup_20241017.specials AS SELECT * FROM specials;
CREATE TABLE backup_20241017.chat_messages AS SELECT * FROM chat_messages;
-- ... å¤‡ä»½æ‰€æœ‰è¡¨

-- 2. è®°å½•å½“å‰çŠ¶æ€
SELECT 
  schemaname,
  tablename,
  pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;
```

### **é˜¶æ®µ 1: åˆ›å»ºæ–°è¡¨ï¼ˆä¸å½±å“çŽ°æœ‰æ•°æ®ï¼‰**

```
ä¼˜å…ˆçº§ï¼šâ­â­â­â­â­

åˆ›å»ºä»¥ä¸‹æ–°è¡¨ï¼š
âœ… business_categories
âœ… user_subscriptions
âœ… user_preferences
âœ… favorites
âœ… chat_sessions
âœ… reviews
âœ… notifications

ä¸å½±å“çŽ°æœ‰åŠŸèƒ½
å¯ä»¥å¹¶è¡Œå¼€å‘
```

### **é˜¶æ®µ 2: è¿ç§»çŽ°æœ‰è¡¨ï¼ˆè°¨æ…Žï¼‰**

```
ä¼˜å…ˆçº§ï¼šâ­â­â­â­

å¯¹çŽ°æœ‰è¡¨è¿›è¡Œä¼˜åŒ–ï¼š
âš ï¸ businesses - æ·»åŠ æ–°å­—æ®µ
âš ï¸ events - æ·»åŠ æ–°å­—æ®µ
âš ï¸ specials - æ·»åŠ æ–°å­—æ®µ
âš ï¸ chat_messages - å…³è”åˆ° sessions

éœ€è¦æµ‹è¯•
éœ€è¦éªŒè¯æ•°æ®å®Œæ•´æ€§
```

### **é˜¶æ®µ 3: æ•°æ®è¿ç§»**

```
ä¼˜å…ˆçº§ï¼šâ­â­â­

è¿ç§»æ•°æ®åˆ°æ–°ç»“æž„ï¼š
ðŸ“Š user_quotas â†’ user_subscriptions
ðŸ“Š çŽ°æœ‰favoritesæ•°æ® â†’ favoritesè¡¨
ðŸ“Š chat_messages â†’ å…³è”åˆ° chat_sessions
```

### **é˜¶æ®µ 4: æ¸…ç†ï¼ˆåŽæœŸï¼‰**

```
ä¼˜å…ˆçº§ï¼šâ­â­

åˆ é™¤è¿‡æ—¶çš„è¡¨/å­—æ®µï¼š
ðŸ—‘ï¸ user_quotasï¼ˆè¿ç§»åŽï¼‰
ðŸ—‘ï¸ assistant_usageï¼ˆå¯é€‰ï¼‰
ðŸ—‘ï¸ anonymous_usageï¼ˆå¯é€‰ï¼‰
```

---

## ðŸš€ å®žæ–½æ­¥éª¤ï¼ˆè¯¦ç»†ï¼‰

### **Step 1: å…¨é¢è¯„ä¼°ï¼ˆ1 å¤©ï¼‰**

- [ ] è¿è¡Œæ•°æ®åº“å½“å‰çŠ¶æ€æŸ¥è¯¢
- [ ] å¯¼å‡ºæ‰€æœ‰è¡¨ç»“æž„
- [ ] è®°å½•æ‰€æœ‰æ•°æ®é‡
- [ ] ç¡®è®¤æ‰€æœ‰å¤–é”®å…³ç³»
- [ ] è¯†åˆ«é—®é¢˜å’Œå†²çª

### **Step 2: åˆ›å»ºå¤‡ä»½ï¼ˆå¿…é¡»ï¼‰**

- [ ] åˆ›å»ºbackup schema
- [ ] å¤‡ä»½æ‰€æœ‰è¡¨
- [ ] éªŒè¯å¤‡ä»½å®Œæ•´æ€§
- [ ] è®°å½•å¤‡ä»½æ—¶é—´å’Œå¤§å°

### **Step 3: åˆ›å»ºåˆ†ç±»è¡¨ï¼ˆ1 å°æ—¶ï¼‰**

- [ ] åˆ›å»º business_categories è¡¨
- [ ] æ’å…¥åˆå§‹åˆ†ç±»æ•°æ®
- [ ] æµ‹è¯•æŸ¥è¯¢

### **Step 4: åˆ›å»ºç”¨æˆ·ç›¸å…³æ–°è¡¨ï¼ˆ2 å°æ—¶ï¼‰**

- [ ] åˆ›å»º user_subscriptions
- [ ] åˆ›å»º user_preferences
- [ ] ä»Ž user_quotas è¿ç§»æ•°æ®
- [ ] æµ‹è¯•æŸ¥è¯¢

### **Step 5: åˆ›å»ºæ”¶è—è¡¨ï¼ˆ1 å°æ—¶ï¼‰**

- [ ] åˆ›å»º favorites è¡¨
- [ ] è¿ç§»çŽ°æœ‰æ”¶è—æ•°æ®ï¼ˆå¦‚æžœæœ‰ï¼‰
- [ ] æ›´æ–°åº”ç”¨ä»£ç 

### **Step 6: åˆ›å»º Chat ä¼šè¯è¡¨ï¼ˆ1 å°æ—¶ï¼‰**

- [ ] åˆ›å»º chat_sessions
- [ ] ä»ŽçŽ°æœ‰ chat_messages ç”Ÿæˆ sessions
- [ ] å…³è”æ¶ˆæ¯åˆ°ä¼šè¯

### **Step 7: åˆ›å»ºè¯„è®ºè¡¨ï¼ˆ1 å°æ—¶ï¼‰**

- [ ] åˆ›å»º reviews è¡¨
- [ ] æµ‹è¯•æ’å…¥å’ŒæŸ¥è¯¢

### **Step 8: åˆ›å»ºé€šçŸ¥è¡¨ï¼ˆ1 å°æ—¶ï¼‰**

- [ ] åˆ›å»º notifications è¡¨
- [ ] æµ‹è¯•æ’å…¥å’ŒæŸ¥è¯¢

### **Step 9: ä¼˜åŒ– businesses è¡¨ï¼ˆ2-3 å°æ—¶ï¼‰**

- [ ] æ·»åŠ æ–°å­—æ®µ
- [ ] è¿ç§»æ•°æ®
- [ ] é‡æ–°è®¡ç®— priority_score
- [ ] æµ‹è¯•æ‰€æœ‰æŸ¥è¯¢

### **Step 10: ä¼˜åŒ–å…¶ä»–è¡¨ï¼ˆ1-2 å°æ—¶ï¼‰**

- [ ] ä¼˜åŒ– events è¡¨
- [ ] ä¼˜åŒ– specials è¡¨
- [ ] æµ‹è¯•åŠŸèƒ½

### **Step 11: å…¨é¢æµ‹è¯•ï¼ˆ1-2 å¤©ï¼‰**

- [ ] æµ‹è¯•æ‰€æœ‰åº”ç”¨åŠŸèƒ½
- [ ] éªŒè¯æ•°æ®å®Œæ•´æ€§
- [ ] æ€§èƒ½æµ‹è¯•
- [ ] ä¿®å¤é—®é¢˜

### **Step 12: æ–‡æ¡£æ›´æ–°ï¼ˆ1 å¤©ï¼‰**

- [ ] æ›´æ–° TypeScript ç±»åž‹å®šä¹‰
- [ ] æ›´æ–°æœåŠ¡å±‚ä»£ç 
- [ ] æ›´æ–° API æ–‡æ¡£
- [ ] åˆ›å»ºæ•°æ®åº“æ–‡æ¡£

---

## â±ï¸ æ—¶é—´ä¼°ç®—

```
æ€»æ—¶é—´ï¼š5-7 å¤©

è¯¦ç»†åˆ†è§£ï¼š
â”œâ”€ å‡†å¤‡å’Œè¯„ä¼°ï¼š1 å¤©
â”œâ”€ åˆ›å»ºæ–°è¡¨ï¼š1 å¤©
â”œâ”€ æ•°æ®è¿ç§»ï¼š1-2 å¤©
â”œâ”€ æµ‹è¯•å’Œä¿®å¤ï¼š1-2 å¤©
â””â”€ æ–‡æ¡£æ›´æ–°ï¼š1 å¤©

å»ºè®®åˆ†é˜¶æ®µè¿›è¡Œï¼Œä¸è¦ä¸€æ¬¡æ€§å®Œæˆ
```

---

## âœ… æˆåŠŸæ ‡å‡†

```
âœ… æ‰€æœ‰æ•°æ®ä¿ç•™ï¼Œæ— ä¸¢å¤±
âœ… æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
âœ… æ€§èƒ½æ— æ˜Žæ˜¾ä¸‹é™
âœ… è¡¨å…³ç³»æ¸…æ™°æ˜Žç¡®
âœ… ç¬¦åˆæœ€ä½³å®žè·µ
âœ… æ˜“äºŽç»´æŠ¤å’Œæ‰©å±•
âœ… æ–‡æ¡£å®Œæ•´æ›´æ–°
```

---

**å‡†å¤‡å¥½å¼€å§‹äº†å—ï¼Ÿ** ðŸš€

**ä¸‹ä¸€æ­¥ï¼šè¿è¡Œæ•°æ®åº“çŠ¶æ€è¯„ä¼°æŸ¥è¯¢ï¼** ðŸ“Š

---

## Coly ä¸ªäººåŠ©æ‰‹ï¼ˆæ–°å¢žï¼‰

### æ–°å¢žæ•°æ®åŸŸä¸Žè¡¨ï¼ˆææ¡ˆï¼‰
- dealsï¼ˆé¤é¥®/ç¾Žå®¹/å¨±ä¹ä¼˜æƒ ï¼‰
- first_table_slotsï¼ˆFirst Table å¯è®¢æ—¶æ®µï¼‰
- supermarket_stores / supermarket_skus / supermarket_pricesï¼ˆè¶…å¸‚é—¨åº—ã€SKUä¸Žä»·æ ¼ï¼‰
- user_watchlistï¼ˆå…³æ³¨ä¸Žé˜ˆå€¼ï¼‰
- remindersï¼ˆåˆ°æœŸ/äº‹é¡¹ï¼‰

### æ•°æ®æµä¸Žé¢‘çŽ‡
- å‘¨æ›´ï¼šè¶…å¸‚ä¿ƒé”€ã€èœå•/ä»·ç›®ã€é€šç”¨ä¼˜æƒ 
- æ—¥æ›´ï¼šFirst Table åé¢ã€æ–°åº—/çƒ­ç‚¹
- Cron + é˜Ÿåˆ—ï¼›å¤±è´¥å›žé€€ï¼›æ¥æºä¸Žæ›´æ–°æ—¶é—´ç•™å­˜

### ç»´æŠ¤ä¸Žåˆè§„
- ä»…å…¬å¼€é¡µï¼›éµå®ˆ robotsï¼›é™é€Ÿä¸Žé€€é¿
- è¿½åŠ å†™+è½¯è¿‡æœŸï¼›ç´¢å¼•æŒ‰æŸ¥è¯¢çƒ­ç‚¹ï¼ˆvalid_to/æ—¥æœŸ/é—¨åº—/SKUï¼‰è®¾è®¡

